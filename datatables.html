<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Tables</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/2.1.5/css/dataTables.dataTables.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="data.css">
    <link rel="icon" href="./assets/database-management.png" type="image/png"> 
</head>
<body>
    <div class="container mt-4">
        <h1 class="text-center">Data Tables</h1>
        <!-- <button id="deleteRows" class="btn btn-danger mb-3">Delete Selected Rows</button> -->

        <!-- Show/Hide Columns Feature -->
        <div class="checkbox-group-container">
            <div class="checkbox-group">
                <div>
                    <input type="checkbox" id="toggle-name" class="styled-checkbox toggle-vis" data-column="1" checked>
                    <label for="toggle-name">Name</label>
                </div>
                <div>
                    <input type="checkbox" id="toggle-position" class="styled-checkbox toggle-vis" data-column="2" checked>
                    <label for="toggle-position">Position</label>
                </div>
                <div>
                    <input type="checkbox" id="toggle-office" class="styled-checkbox toggle-vis" data-column="3" checked>
                    <label for="toggle-office">Office</label>
                </div>
                <div>
                    <input type="checkbox" id="toggle-extn" class="styled-checkbox toggle-vis" data-column="4" checked>
                    <label for="toggle-extn">Extn.</label>
                </div>
                <div>
                    <input type="checkbox" id="toggle-start" class="styled-checkbox toggle-vis" data-column="5" checked>
                    <label for="toggle-start">Start date</label>
                </div>
                <div>
                    <input type="checkbox" id="toggle-salary" class="styled-checkbox toggle-vis" data-column="6" checked>
                    <label for="toggle-salary">Salary</label>
                </div>
                <div>
                    <input type="checkbox" id="toggle-phone" class="styled-checkbox toggle-vis" data-column="7" checked>
                    <label for="toggle-phone">Department</label>
                </div>
            </div>
        </div>

        <!-- Tabs -->
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="home-tab" data-bs-toggle="tab" href="#tab1" role="tab" aria-controls="home" aria-selected="true">Table 1</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#tab2" role="tab" aria-controls="profile" aria-selected="false">Table 2</a>
            </li>
        </ul>
        
        <div class="tab-content" id="myTabContent">
            <button id="deleteRows" class="btn btn-danger mb-3">Delete Selected Rows</button>
            <div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="home-tab">
                <table id="example1" class="display table table-striped table-bordered" style="width:100%">
                    <thead>
                        <tr class="search-row">
                            <th></th>
                            <th><input type="text" id="search-name" placeholder="Search Name"></th>
                            <th><input type="text" id="search-position" placeholder="Search Position"></th>
                            <th><input type="text" id="search-office" placeholder="Search Office"></th>
                            <th><input type="text" id="search-extn" placeholder="Search Extn."></th>
                            <th><input type="text" id="search-start" placeholder="Search Start date"></th>
                            <th><input type="text" id="search-salary" placeholder="Search Salary"></th>
                            <th><input type="text" id="search-phone" placeholder="Search Department"></th>
                        </tr>
                        <tr>
                            <th>Select</th>
                            <th>Name</th>
                            <th>Position</th>
                            <th>Office</th>
                            <th>Extn.</th>
                            <th>Start date</th>
                            <th>Salary</th>
                            <th>Department</th>
                        </tr>
                    </thead>
                    <tfoot>
                        <tr>
                            <th>Select</th>
                            <th>Name</th>
                            <th>Position</th>
                            <th>Office</th>
                            <th>Extn.</th>
                            <th>Start date</th>
                            <th>Salary</th>
                            <th>Department</th>
                        </tr>
                    </tfoot>
                </table>
            </div>
            <div class="tab-pane fade" id="tab2" role="tabpanel" aria-labelledby="profile-tab">
                <table id="example2" class="display table table-striped table-bordered" style="width:100%">
                    <thead>
                        <tr class="search-row">
                            <th></th>
                            <th><input type="text" id="search-name-2" placeholder="Search Name"></th>
                            <th><input type="text" id="search-position-2" placeholder="Search Position"></th>
                            <th><input type="text" id="search-office-2" placeholder="Search Office"></th>
                            <th><input type="text" id="search-extn-2" placeholder="Search Extn."></th>
                            <th><input type="text" id="search-start-2" placeholder="Search Start date"></th>
                            <th><input type="text" id="search-salary-2" placeholder="Search Salary"></th>
                            <th><input type="text" id="search-phone-2" placeholder="Search Department"></th>
                        </tr>
                        <tr>
                            <th>Select</th>
                            <th>Name</th>
                            <th>Position</th>
                            <th>Office</th>
                            <th>Extn.</th>
                            <th>Start date</th>
                            <th>Salary</th>
                            <th>Department</th>
                        </tr>
                    </thead>
                    <tfoot>
                        <tr>
                            <th>Select</th>
                            <th>Name</th>
                            <th>Position</th>
                            <th>Office</th>
                            <th>Extn.</th>
                            <th>Start date</th>   
                            <th>Salary</th>
                            <th>Department</th>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://cdn.datatables.net/2.1.5/js/dataTables.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

    <script>
        $(document).ready(function() {
            // Initialize DataTables
            var table1 = new DataTable('#example1', {
                "ajax": "data.txt",  // Replace with your actual data source URL
                "columns": [
                    { "data": null, "defaultContent": '<input type="checkbox" class="row-select">' },  // Checkbox column
                    { "data": 0 },
                    { "data": 1 },
                    { "data": 2 },
                    { "data": 3 },
                    { "data": 4 },
                    { "data": 5 },
                    { "data": 6 }
                ],
                "dom": '<"row"<"col-md-12 text-center"p>>' +
                       'rt' +
                       '<"row"<"col-md-6"l>>' +
                       '<"row"<"col-md-12"i>>',
            });

            var table2 = new DataTable('#example2', {
                "ajax": "data.txt",  // Replace with your actual data source URL
                "columns": [
                    { "data": null, "defaultContent": '<input type="checkbox" class="row-select">' },  // Checkbox column
                    { "data": 0 },
                    { "data": 1 },
                    { "data": 2 },
                    { "data": 3 },
                    { "data": 4 },
                    { "data": 5},
                    { "data": 6 }
                ],
                "dom": '<"row"<"col-md-12 text-center"p>>' +
                       'rt' +
                       '<"row"<"col-md-6"l>>' +
                       '<"row"<"col-md-12"i>>',
            });

        $(document).ready(function() {
            // Select the row with the class 'search-row'
            $('tr.search-row').find('th').each(function() {
                // Add event listeners to stop propagation
                $(this).on('click mouseover mouseout mousedown mouseup', function(event) {
                    event.stopPropagation();
                });
            });
        });

            // Apply the search for each column for table1
            $('#search-name').on('keyup change', function() {
                table1.column(1).search(this.value).draw();
            });
            $('#search-position').on('keyup change', function() {
                table1.column(2).search(this.value).draw();
            });
            $('#search-office').on('keyup change', function() {
                table1.column(3).search(this.value).draw();
            });
            $('#search-extn').on('keyup change', function() {
                table1.column(4).search(this.value).draw();
            });
            $('#search-start').on('keyup change', function() {
                table1.column(5).search(this.value).draw();
            });
            $('#search-salary').on('keyup change', function() {
                table1.column(6).search(this.value).draw();
            });
            $('#search-phone').on('keyup change', function() {
                table1.column(7).search(this.value).draw();
            });

            // Apply the search for each column for table2
            $('#search-name-2').on('keyup change', function() {
                table2.column(1).search(this.value).draw();
            });
            $('#search-position-2').on('keyup change', function() {
                table2.column(2).search(this.value).draw();
            });
            $('#search-office-2').on('keyup change', function() {
                table2.column(3).search(this.value).draw();
            });
            $('#search-extn-2').on('keyup change', function() {
                table2.column(4).search(this.value).draw();
            });
            $('#search-start-2').on('keyup change', function() {
                table2.column(5).search(this.value).draw();
            });
            $('#search-salary-2').on('keyup change', function() {
                table2.column(6).search(this.value).draw();
            });
            $('#search-phone-2').on('keyup change', function() {
                table2.column(7).search(this.value).draw();
            });

            // Handle row deletion for table1
            $('#deleteRows').click(function() {
                $('#example1 tbody input.row-select:checked').each(function() {
                    var row = $(this).closest('tr');
                    table1.row(row).remove().draw();
                });
            });

            // Handle row deletion for table2
            $('#deleteRows').click(function() {
                $('#example2 tbody input.row-select:checked').each(function() {
                    var row = $(this).closest('tr');
                    table2.row(row).remove().draw();
                });
            });

            // Handle show/hide columns for table1
            $('.toggle-vis').on('change', function(e) {
                e.preventDefault();
                var column = table1.column($(this).attr('data-column'));
                column.visible(!column.visible());
            });

            // Handle show/hide columns for table2
            $('.toggle-vis').on('change', function(e) {
                e.preventDefault();
                var column = table2.column($(this).attr('data-column'));
                column.visible(!column.visible());
            });            
        });
    </script>
</body>
</html>